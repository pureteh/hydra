<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hydra.Model</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">tests</span><ul class="links" id="page-menu"><li><a href="src/Hydra.Model.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Hydra.Model</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">The Model</a><ul><li><a href="#g:2">Generator Helper</a></li></ul></li><li><a href="#g:3">Running the model</a><ul><li><a href="#g:4">Performing actions</a></li><li><a href="#g:5">Utility functions</a></li></ul></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A <em>Model</em> of the Hydra head Protocol.</p><p>This model integrates in a single state-machine like abstraction the whole behaviour of
 a Hydra Head, taking into account both on-chain state and contracts, and off-chain
 interactions. It is written from the point of view of a pre-defined set of Hydra node
 <em>operators</em> that want to create a channel between them.
 It's a &quot;happy path&quot; model that does not implement any kind of adversarial behaviour and
 whose transactions are very simple: Each tx is a payment of one Ada-only UTxO transferred
 to another party in full, without any change.</p><p>More intricate and specialised models shall be developed once we get a firmer grasp of
 the whole framework, injecting faults, taking into account more parts of the stack,
 modelling more complex transactions schemes...</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:WorldState">WorldState</a> = <a href="#v:WorldState">WorldState</a> {<ul class="subs"><li><a href="#v:hydraParties">hydraParties</a> :: [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)]</li><li><a href="#v:hydraState">hydraState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:GlobalState">GlobalState</a><ul class="subs"><li>= <a href="#v:Start">Start</a></li><li>| <a href="#v:Idle">Idle</a> { <ul class="subs"><li><a href="#v:idleParties">idleParties</a> :: [Party]</li><li><a href="#v:cardanoKeys">cardanoKeys</a> :: [VerificationKey PaymentKey]</li><li><a href="#v:idleContestationPeriod">idleContestationPeriod</a> :: ContestationPeriod</li></ul> }</li><li>| <a href="#v:Initial">Initial</a> { <ul class="subs"><li><a href="#v:headParameters">headParameters</a> :: HeadParameters</li><li><a href="#v:commits">commits</a> :: Committed <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a></li><li><a href="#v:pendingCommits">pendingCommits</a> :: PendingCommits</li></ul> }</li><li>| <a href="#v:Open">Open</a> { <ul class="subs"><li><a href="#v:headParameters">headParameters</a> :: HeadParameters</li><li><a href="#v:offChainState">offChainState</a> :: <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a></li></ul> }</li><li>| <a href="#v:Final">Final</a> { <ul class="subs"><li><a href="#v:finalUTxO">finalUTxO</a> :: UTxOType <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a></li></ul> }</li></ul></li><li class="src short"><a href="#v:isInitialState">isInitialState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isOpenState">isOpenState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isFinalState">isFinalState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isIdleState">isIdleState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isPendingCommitFrom">isPendingCommitFrom</a> :: Party -&gt; <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:OffChainState">OffChainState</a> = <a href="#v:OffChainState">OffChainState</a> {<ul class="subs"><li><a href="#v:confirmedUTxO">confirmedUTxO</a> :: UTxOType <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a></li><li><a href="#v:seenTransactions">seenTransactions</a> :: [<a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a>]</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ActualCommitted">ActualCommitted</a> = UTxOType <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a></li><li class="src short"><a href="#v:genSeed">genSeed</a> :: Gen (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ())</li><li class="src short"><a href="#v:genContestationPeriod">genContestationPeriod</a> :: Gen ContestationPeriod</li><li class="src short"><a href="#v:genInit">genInit</a> :: [(SigningKey HydraKey, b)] -&gt; Gen (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ())</li><li class="src short"><a href="#v:genCommit-39-">genCommit'</a> :: [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)] -&gt; (SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>) -&gt; Gen (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> [(<a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>, Value)])</li><li class="src short"><a href="#v:genPayment">genPayment</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Gen (Party, <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a>)</li><li class="src short"><a href="#v:unsafeConstructorName">unsafeConstructorName</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:partyKeys">partyKeys</a> :: Gen [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Nodes">Nodes</a> m = <a href="#v:Nodes">Nodes</a> {<ul class="subs"><li><a href="#v:nodes">nodes</a> :: Map Party (<a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> Tx m)</li><li><a href="#v:logger">logger</a> :: Tracer m (HydraLog Tx ())</li><li><a href="#v:threads">threads</a> :: [Async m ()]</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:RunState">RunState</a> m = <a href="#v:RunState">RunState</a> {<ul class="subs"><li><a href="#v:nodesState">nodesState</a> :: TVar m (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m)</li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:RunMonad">RunMonad</a> m a = <a href="#v:RunMonad">RunMonad</a> {<ul class="subs"><li><a href="#v:runMonad">runMonad</a> :: ReaderT (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m) m a</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:RunException">RunException</a><ul class="subs"><li>= <a href="#v:TransactionNotObserved">TransactionNotObserved</a> <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> UTxO</li><li>| <a href="#v:UnexpectedParty">UnexpectedParty</a> Party</li><li>| <a href="#v:UnknownAddress">UnknownAddress</a> AddressInEra [(AddressInEra, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)]</li><li>| <a href="#v:CannotFindSpendableUTxO">CannotFindSpendableUTxO</a> <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> UTxO</li></ul></li><li class="src short"><a href="#v:seedWorld">seedWorld</a> :: (MonadDelay m, MonadAsync m, MonadTimer m, MonadThrow (STM m), MonadLabelledSTM m, MonadFork m, MonadMask m) =&gt; [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)] -&gt; ContestationPeriod -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</li><li class="src short"><a href="#v:performCommit">performCommit</a> :: (MonadThrow m, MonadTimer m) =&gt; [<a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>] -&gt; Party -&gt; [(<a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>, Value)] -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m <a href="Hydra-Model.html#t:ActualCommitted" title="Hydra.Model">ActualCommitted</a></li><li class="src short"><a href="#v:performNewTx">performNewTx</a> :: (MonadThrow m, MonadAsync m, MonadTimer m) =&gt; Party -&gt; <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</li><li class="src short"><a href="#v:waitForOpen">waitForOpen</a> :: MonadDelay m =&gt; <a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> tx m -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</li><li class="src short"><a href="#v:sendsInput">sendsInput</a> :: (MonadSTM m, MonadThrow m) =&gt; Party -&gt; ClientInput Tx -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</li><li class="src short"><a href="#v:performInit">performInit</a> :: (MonadDelay m, MonadThrow m, MonadAsync m, MonadTimer m) =&gt; Party -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</li><li class="src short"><a href="#v:performAbort">performAbort</a> :: (MonadDelay m, MonadThrow m, MonadAsync m, MonadTimer m) =&gt; Party -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</li><li class="src short"><a href="#v:stopTheWorld">stopTheWorld</a> :: MonadAsync m =&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</li><li class="src short"><a href="#v:showFromAction">showFromAction</a> :: (<a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; b) -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; b</li><li class="src short"><a href="#v:checkOutcome">checkOutcome</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:waitForUTxOToSpend">waitForUTxOToSpend</a> :: <span class="keyword">forall</span> m. (MonadDelay m, MonadTimer m) =&gt; UTxO -&gt; <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a> -&gt; Value -&gt; <a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> Tx m -&gt; m (<a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> UTxO (TxIn, TxOut CtxUTxO))</li><li class="src short"><a href="#v:isOwned">isOwned</a> :: <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a> -&gt; (TxIn, TxOut ctx) -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>The Model</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:WorldState" class="def">WorldState</a> <a href="src/Hydra.Model.html#WorldState" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></p><div class="doc"><p>State maintained by the model.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:WorldState" class="def">WorldState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:hydraParties" class="def">hydraParties</a> :: [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)]</dfn><div class="doc"><p>List of parties identified by both signing keys required to run protocol.
 This list must not contain any duplicated key.</p></div></li><li><dfn class="src"><a id="v:hydraState" class="def">hydraState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a></dfn><div class="doc"><p>Expected consensus state
 All nodes should be in the same state.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:WorldState">Instances</h4><details id="i:WorldState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:Eq:1"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></span> <a href="src/Hydra.Model.html#line-96" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:Show:2"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></span> <a href="src/Hydra.Model.html#line-96" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>] -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:StateModel:3"></span> StateModel <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></span> <a href="src/Hydra.Model.html#line-159" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc"><p>Basic instantiation of <code>StateModel</code> for our <code><a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></code> state.</p></td></tr><tr><td colspan="2"><details id="i:id:WorldState:StateModel:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">data</span> Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a</p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:actionName">actionName</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a></p><p class="src"><a href="#v:arbitraryAction">arbitraryAction</a> :: VarContext -&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Gen (Any (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>))</p><p class="src"><a href="#v:shrinkAction">shrinkAction</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a =&gt; VarContext -&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; [Any (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>)]</p><p class="src"><a href="#v:initialState">initialState</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></p><p class="src"><a href="#v:nextState">nextState</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a =&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; Var a -&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></p><p class="src"><a href="#v:precondition">precondition</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:HasVariables:4"></span> HasVariables <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></span> <a href="src/Hydra.Model.html#line-312" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:HasVariables:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getAllVariables">getAllVariables</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Set (Any Var)</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:DynLogicModel:5"></span> DynLogicModel <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a></span> <a href="src/Hydra.Model.html#line-154" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:DynLogicModel:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:restricted">restricted</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:RunModel:6"></span> (MonadAsync m, MonadFork m, MonadMask m, MonadTimer m, MonadThrow (STM m), MonadLabelledSTM m) =&gt; RunModel <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-431" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:RunModel:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:perform">perform</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a =&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; LookUp (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m (Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a)</p><p class="src"><a href="#v:postcondition">postcondition</a> :: (<a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>, <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>) -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; LookUp (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) -&gt; Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a -&gt; PostconditionM (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></p><p class="src"><a href="#v:monitoring">monitoring</a> :: (<a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>, <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>) -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; LookUp (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) -&gt; Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a -&gt; Property -&gt; Property</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:Eq:7"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a)</span> <a href="src/Hydra.Model.html#line-323" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:Eq:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:Show:8"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a)</span> <a href="src/Hydra.Model.html#line-322" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:Show:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a] -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:HasVariables:9"></span> HasVariables (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a)</span> <a href="src/Hydra.Model.html#line-319" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:HasVariables:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getAllVariables">getAllVariables</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; Set (Any Var)</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:WorldState:Action:10"></span> <span class="keyword">data</span> Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a</span> <a href="src/Hydra.Model.html#line-164" class="link">Source</a> <a href="#t:WorldState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:WorldState:Action:10"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="src"><span class="keyword">data</span> Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a <span class="keyword">where</span><ul class="inst"><li class="inst"><a id="v:Seed" class="def">Seed</a> :: {..} -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="inst"><a id="v:Init" class="def">Init</a> :: Party -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="inst"><a id="v:Commit" class="def">Commit</a> :: Party -&gt; UTxOType <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> <a href="Hydra-Model.html#t:ActualCommitted" title="Hydra.Model">ActualCommitted</a></li><li class="inst"><a id="v:Abort" class="def">Abort</a> :: Party -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="inst"><a id="v:NewTx" class="def">NewTx</a> :: Party -&gt; <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="inst"><a id="v:Wait" class="def">Wait</a> :: DiffTime -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="inst"><a id="v:ObserveConfirmedTx" class="def">ObserveConfirmedTx</a> :: <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="inst"><a id="v:ObserveHeadIsOpen" class="def">ObserveHeadIsOpen</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li><li class="inst"><a id="v:StopTheWorld" class="def">StopTheWorld</a> :: Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()</li></ul></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:GlobalState" class="def">GlobalState</a> <a href="src/Hydra.Model.html#GlobalState" class="link">Source</a> <a href="#t:GlobalState" class="selflink">#</a></p><div class="doc"><p>Global state of the Head protocol.
 While each participant in the Hydra Head protocol has its own private
 view of the state, we model the expected global state whose properties
 stem from the consensus built into the Head protocol. In other words, this
 state is what each node's local state should be <em>eventually</em>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Start" class="def">Start</a></td><td class="doc"><p>Start of the &quot;world&quot;.
 This state is left implicit in the node's logic as it
 represents that state where the node does not even
 exist.</p></td></tr><tr><td class="src"><a id="v:Idle" class="def">Idle</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:idleParties" class="def">idleParties</a> :: [Party]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cardanoKeys" class="def">cardanoKeys</a> :: [VerificationKey PaymentKey]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:idleContestationPeriod" class="def">idleContestationPeriod</a> :: ContestationPeriod</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:Initial" class="def">Initial</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:headParameters" class="def">headParameters</a> :: HeadParameters</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:commits" class="def">commits</a> :: Committed <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:pendingCommits" class="def">pendingCommits</a> :: PendingCommits</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:Open" class="def">Open</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:headParameters" class="def">headParameters</a> :: HeadParameters</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:offChainState" class="def">offChainState</a> :: <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:Final" class="def">Final</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:finalUTxO" class="def">finalUTxO</a> :: UTxOType <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:GlobalState">Instances</h4><details id="i:GlobalState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:GlobalState:Eq:1"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a></span> <a href="src/Hydra.Model.html#line-124" class="link">Source</a> <a href="#t:GlobalState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:GlobalState:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:GlobalState:Show:2"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a></span> <a href="src/Hydra.Model.html#line-124" class="link">Source</a> <a href="#t:GlobalState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:GlobalState:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a>] -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:isInitialState" class="def">isInitialState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Hydra.Model.html#isInitialState" class="link">Source</a> <a href="#v:isInitialState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isOpenState" class="def">isOpenState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Hydra.Model.html#isOpenState" class="link">Source</a> <a href="#v:isOpenState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isFinalState" class="def">isFinalState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Hydra.Model.html#isFinalState" class="link">Source</a> <a href="#v:isFinalState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isIdleState" class="def">isIdleState</a> :: <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Hydra.Model.html#isIdleState" class="link">Source</a> <a href="#v:isIdleState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isPendingCommitFrom" class="def">isPendingCommitFrom</a> :: Party -&gt; <a href="Hydra-Model.html#t:GlobalState" title="Hydra.Model">GlobalState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Hydra.Model.html#isPendingCommitFrom" class="link">Source</a> <a href="#v:isPendingCommitFrom" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:OffChainState" class="def">OffChainState</a> <a href="src/Hydra.Model.html#OffChainState" class="link">Source</a> <a href="#t:OffChainState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:OffChainState" class="def">OffChainState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:confirmedUTxO" class="def">confirmedUTxO</a> :: UTxOType <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:seenTransactions" class="def">seenTransactions</a> :: [<a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a>]</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:OffChainState">Instances</h4><details id="i:OffChainState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:OffChainState:Eq:1"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a></span> <a href="src/Hydra.Model.html#line-151" class="link">Source</a> <a href="#t:OffChainState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:OffChainState:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a> -&gt; <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a> -&gt; <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:OffChainState:Show:2"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a></span> <a href="src/Hydra.Model.html#line-151" class="link">Source</a> <a href="#t:OffChainState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:OffChainState:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Hydra-Model.html#t:OffChainState" title="Hydra.Model">OffChainState</a>] -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ActualCommitted" class="def">ActualCommitted</a> = UTxOType <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> <a href="src/Hydra.Model.html#ActualCommitted" class="link">Source</a> <a href="#t:ActualCommitted" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h2>Generator Helper</h2></a><div class="top"><p class="src"><a id="v:genSeed" class="def">genSeed</a> :: Gen (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()) <a href="src/Hydra.Model.html#genSeed" class="link">Source</a> <a href="#v:genSeed" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genContestationPeriod" class="def">genContestationPeriod</a> :: Gen ContestationPeriod <a href="src/Hydra.Model.html#genContestationPeriod" class="link">Source</a> <a href="#v:genContestationPeriod" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genInit" class="def">genInit</a> :: [(SigningKey HydraKey, b)] -&gt; Gen (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> ()) <a href="src/Hydra.Model.html#genInit" class="link">Source</a> <a href="#v:genInit" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genCommit-39-" class="def">genCommit'</a> :: [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)] -&gt; (SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>) -&gt; Gen (Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> [(<a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>, Value)]) <a href="src/Hydra.Model.html#genCommit%27" class="link">Source</a> <a href="#v:genCommit-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genPayment" class="def">genPayment</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Gen (Party, <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a>) <a href="src/Hydra.Model.html#genPayment" class="link">Source</a> <a href="#v:genPayment" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unsafeConstructorName" class="def">unsafeConstructorName</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Hydra.Model.html#unsafeConstructorName" class="link">Source</a> <a href="#v:unsafeConstructorName" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:partyKeys" class="def">partyKeys</a> :: Gen [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)] <a href="src/Hydra.Model.html#partyKeys" class="link">Source</a> <a href="#v:partyKeys" class="selflink">#</a></p><div class="doc"><p>Generate a list of pairs of Hydra/Cardano signing keys.
 All the keys in this list are guaranteed to be unique.</p></div></div><a href="#g:3" id="g:3"><h1>Running the model</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Nodes" class="def">Nodes</a> m <a href="src/Hydra.Model.html#Nodes" class="link">Source</a> <a href="#t:Nodes" class="selflink">#</a></p><div class="doc"><p>Concrete state needed to run actions against the implementation.
 This state is used and might be updated when actually <code>perform</code>ing actions generated from the <code>StateModel</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Nodes" class="def">Nodes</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:nodes" class="def">nodes</a> :: Map Party (<a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> Tx m)</dfn><div class="doc"><p>Map from party identifiers to a <em>handle</em> for interacting with a node.</p></div></li><li><dfn class="src"><a id="v:logger" class="def">logger</a> :: Tracer m (HydraLog Tx ())</dfn><div class="doc"><p>Logger used by each node.
 The reason we put this here is because the concrete value needs to be
 instantiated upon the test run initialisation, outiside of the model.</p></div></li><li><dfn class="src"><a id="v:threads" class="def">threads</a> :: [Async m ()]</dfn><div class="doc"><p>List of threads spawned when executing <code><a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a></code></p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Nodes">Instances</h4><details id="i:Nodes" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Nodes:MonadState:1"></span> MonadSTM m =&gt; MonadState (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m) (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-409" class="link">Source</a> <a href="#t:Nodes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Nodes:MonadState:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:get">get</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m)</p><p class="src"><a href="#v:put">put</a> :: <a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</p><p class="src"><a href="#v:state">state</a> :: (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m -&gt; (a, <a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m)) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:RunState" class="def">RunState</a> m <a href="src/Hydra.Model.html#RunState" class="link">Source</a> <a href="#t:RunState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RunState" class="def">RunState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:nodesState" class="def">nodesState</a> :: TVar m (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RunState">Instances</h4><details id="i:RunState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunState:MonadReader:1"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; MonadReader (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m) (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-404" class="link">Source</a> <a href="#t:RunState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunState:MonadReader:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ask">ask</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m)</p><p class="src"><a href="#v:local">local</a> :: (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m -&gt; <a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p><p class="src"><a href="#v:reader">reader</a> :: (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m -&gt; a) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:RunMonad" class="def">RunMonad</a> m a <a href="src/Hydra.Model.html#RunMonad" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></p><div class="doc"><p>Our execution <code>MonadTrans</code>former.</p><p>This type is needed in order to keep the execution monad <code>m</code> abstract  and thus
 simplify the definition of the <code>RunModel</code> instance which requires a proper definition
 of <code>Realized</code>  type family. See <a href="https://github.com/input-output-hk/quickcheck-dynamic/issues/29">this issue</a>
 for a discussion on why this monad is needed.</p><p>We could perhaps getaway with it and just have a type based on <code>IOSim</code> monad
 but this is cumbersome to write.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RunMonad" class="def">RunMonad</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runMonad" class="def">runMonad</a> :: ReaderT (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m) m a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RunMonad">Instances</h4><details id="i:RunMonad" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:MonadTrans:1"></span> MonadTrans <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a></span> <a href="src/Hydra.Model.html#line-406" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:MonadTrans:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:RunModel:2"></span> (MonadAsync m, MonadFork m, MonadMask m, MonadTimer m, MonadThrow (STM m), MonadLabelledSTM m) =&gt; RunModel <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-431" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:RunModel:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:perform">perform</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a =&gt; <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; LookUp (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m (Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a)</p><p class="src"><a href="#v:postcondition">postcondition</a> :: (<a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>, <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>) -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; LookUp (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) -&gt; Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a -&gt; PostconditionM (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></p><p class="src"><a href="#v:monitoring">monitoring</a> :: (<a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>, <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a>) -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; LookUp (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) -&gt; Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a -&gt; Property -&gt; Property</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:Monad:3"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-404" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:Monad:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; (a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:Functor:4"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m =&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-404" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:Functor:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:Applicative:5"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-404" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:Applicative:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m (a -&gt; b) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m c <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:MonadThrow:6"></span> MonadThrow m =&gt; MonadThrow (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-404" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:MonadThrow:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwIO">throwIO</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; e -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p><p class="src"><a href="#v:bracket">bracket</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; (a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b) -&gt; (a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m c) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m c</p><p class="src"><a href="#v:bracket_">bracket_</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m c -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m c</p><p class="src"><a href="#v:finally">finally</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m b -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:MonadReader:7"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; MonadReader (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m) (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-404" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:MonadReader:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ask">ask</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m)</p><p class="src"><a href="#v:local">local</a> :: (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m -&gt; <a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p><p class="src"><a href="#v:reader">reader</a> :: (<a href="Hydra-Model.html#t:RunState" title="Hydra.Model">RunState</a> m -&gt; a) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:MonadState:8"></span> MonadSTM m =&gt; MonadState (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m) (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m)</span> <a href="src/Hydra.Model.html#line-409" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunMonad:MonadState:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:get">get</a> :: <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m)</p><p class="src"><a href="#v:put">put</a> :: <a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m ()</p><p class="src"><a href="#v:state">state</a> :: (<a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m -&gt; (a, <a href="Hydra-Model.html#t:Nodes" title="Hydra.Model">Nodes</a> m)) -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunMonad:Realized:9"></span> <span class="keyword">type</span> Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a</span> <a href="src/Hydra.Model.html#line-428" class="link">Source</a> <a href="#t:RunMonad" class="selflink">#</a></td><td class="doc"><p>This type family is needed to link the _actual_ output from runnign actions
 with the ones that are modelled.</p><p>In our case we can keep things simple and use the same types on both side of
 the fence.</p></td></tr><tr><td colspan="2"><details id="i:id:RunMonad:Realized:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="src"><span class="keyword">type</span> Realized (<a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m) a = a</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RunException" class="def">RunException</a> <a href="src/Hydra.Model.html#RunException" class="link">Source</a> <a href="#t:RunException" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TransactionNotObserved" class="def">TransactionNotObserved</a> <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> UTxO</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:UnexpectedParty" class="def">UnexpectedParty</a> Party</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:UnknownAddress" class="def">UnknownAddress</a> AddressInEra [(AddressInEra, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CannotFindSpendableUTxO" class="def">CannotFindSpendableUTxO</a> <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> UTxO</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RunException">Instances</h4><details id="i:RunException" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunException:Eq:1"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a></span> <a href="src/Hydra.Model.html#line-419" class="link">Source</a> <a href="#t:RunException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunException:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/ghc-prim-0.6.1/src" class="link">Source</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunException:Show:2"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a></span> <a href="src/Hydra.Model.html#line-419" class="link">Source</a> <a href="#t:RunException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunException:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a>] -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RunException:Exception:3"></span> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a></span> <a href="src/Hydra.Model.html#line-421" class="link">Source</a> <a href="#t:RunException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RunException:Exception:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hydra-Model.html">Hydra.Model</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Control-Exception-Base.html#t:SomeException" title="Control.Exception.Base">SomeException</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Hydra-Model.html#t:RunException" title="Hydra.Model">RunException</a> -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/src" class="link">Source</a> <a href="#v:displayException" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:4" id="g:4"><h2>Performing actions</h2></a><div class="top"><p class="src"><a id="v:seedWorld" class="def">seedWorld</a> :: (MonadDelay m, MonadAsync m, MonadTimer m, MonadThrow (STM m), MonadLabelledSTM m, MonadFork m, MonadMask m) =&gt; [(SigningKey HydraKey, <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>)] -&gt; ContestationPeriod -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m () <a href="src/Hydra.Model.html#seedWorld" class="link">Source</a> <a href="#v:seedWorld" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:performCommit" class="def">performCommit</a> :: (MonadThrow m, MonadTimer m) =&gt; [<a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>] -&gt; Party -&gt; [(<a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a>, Value)] -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m <a href="Hydra-Model.html#t:ActualCommitted" title="Hydra.Model">ActualCommitted</a> <a href="src/Hydra.Model.html#performCommit" class="link">Source</a> <a href="#v:performCommit" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:performNewTx" class="def">performNewTx</a> :: (MonadThrow m, MonadAsync m, MonadTimer m) =&gt; Party -&gt; <a href="Hydra-Model-Payment.html#t:Payment" title="Hydra.Model.Payment">Payment</a> -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m () <a href="src/Hydra.Model.html#performNewTx" class="link">Source</a> <a href="#v:performNewTx" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:waitForOpen" class="def">waitForOpen</a> :: MonadDelay m =&gt; <a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> tx m -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m () <a href="src/Hydra.Model.html#waitForOpen" class="link">Source</a> <a href="#v:waitForOpen" class="selflink">#</a></p><div class="doc"><p>Wait for the head to be open by searching from the beginning. Note that
 there rollbacks or multiple life-cycles of heads are not handled here.</p></div></div><div class="top"><p class="src"><a id="v:sendsInput" class="def">sendsInput</a> :: (MonadSTM m, MonadThrow m) =&gt; Party -&gt; ClientInput Tx -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m () <a href="src/Hydra.Model.html#sendsInput" class="link">Source</a> <a href="#v:sendsInput" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:performInit" class="def">performInit</a> :: (MonadDelay m, MonadThrow m, MonadAsync m, MonadTimer m) =&gt; Party -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m () <a href="src/Hydra.Model.html#performInit" class="link">Source</a> <a href="#v:performInit" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:performAbort" class="def">performAbort</a> :: (MonadDelay m, MonadThrow m, MonadAsync m, MonadTimer m) =&gt; Party -&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m () <a href="src/Hydra.Model.html#performAbort" class="link">Source</a> <a href="#v:performAbort" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:stopTheWorld" class="def">stopTheWorld</a> :: MonadAsync m =&gt; <a href="Hydra-Model.html#t:RunMonad" title="Hydra.Model">RunMonad</a> m () <a href="src/Hydra.Model.html#stopTheWorld" class="link">Source</a> <a href="#v:stopTheWorld" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h2>Utility functions</h2></a><div class="top"><p class="src"><a id="v:showFromAction" class="def">showFromAction</a> :: (<a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a =&gt; b) -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; b <a href="src/Hydra.Model.html#showFromAction" class="link">Source</a> <a href="#v:showFromAction" class="selflink">#</a></p><div class="doc"><p>Bring <code><a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a></code> instance in scope drawing it from the <code>Action</code> type.</p><p>This is a neat trick to provide <code>show</code>able results from action in a context where
 there's no explicit `Show a` instance, eg. in the <code>monitoring</code> and <code>postcondition</code>
 functions. We don't have access to an <code>a</code> directly because its value depends on
 type family <code>Realized</code>.</p></div></div><div class="top"><p class="src"><a id="v:checkOutcome" class="def">checkOutcome</a> :: <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> -&gt; Action <a href="Hydra-Model.html#t:WorldState" title="Hydra.Model">WorldState</a> a -&gt; a -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Hydra.Model.html#checkOutcome" class="link">Source</a> <a href="#v:checkOutcome" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:waitForUTxOToSpend" class="def">waitForUTxOToSpend</a> :: <span class="keyword">forall</span> m. (MonadDelay m, MonadTimer m) =&gt; UTxO -&gt; <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a> -&gt; Value -&gt; <a href="Hydra-BehaviorSpec.html#t:TestHydraClient" title="Hydra.BehaviorSpec">TestHydraClient</a> Tx m -&gt; m (<a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> UTxO (TxIn, TxOut CtxUTxO)) <a href="src/Hydra.Model.html#waitForUTxOToSpend" class="link">Source</a> <a href="#v:waitForUTxOToSpend" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isOwned" class="def">isOwned</a> :: <a href="Hydra-Model-Payment.html#t:CardanoSigningKey" title="Hydra.Model.Payment">CardanoSigningKey</a> -&gt; (TxIn, TxOut ctx) -&gt; <a href="file:///nix/store/dfjkypyaw967idcp0h3l5kydwc5ycvlx-ghc-8.10.7-doc/share/doc/ghc/html/libraries/base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Hydra.Model.html#isOwned" class="link">Source</a> <a href="#v:isOwned" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>