<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hydra.Cardano.Api.Witness</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Cardano.Api.Prelude.html"><span class="hs-identifier">Hydra.Cardano.Api.Prelude</span></a></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hydra.Cardano.Api.ScriptLanguageInEra.html"><span class="hs-identifier">Hydra.Cardano.Api.ScriptLanguageInEra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hydra.Cardano.Api.ScriptLanguageInEra.html#HasScriptLanguage"><span class="hs-identifier">HasScriptLanguage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-comment">-- | Construct a full script witness from a datum, a redeemer and a full</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- 'PlutusScript'. That witness has no execution budget.</span><span>
</span><span id="line-10"></span><span class="annot"><a href="Hydra.Cardano.Api.Witness.html#mkScriptWitness"><span class="hs-identifier hs-type">mkScriptWitness</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679222478"><span class="annot"><a href="#local-6989586621679222478"><span class="hs-identifier hs-type">ctx</span></a></span></span><span> </span><span id="local-6989586621679222481"><span class="annot"><a href="#local-6989586621679222481"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679222483"><span class="annot"><a href="#local-6989586621679222483"><span class="hs-identifier hs-type">lang</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsPlutusScriptLanguage</span></span><span> </span><span class="annot"><a href="#local-6989586621679222483"><span class="hs-identifier hs-type">lang</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Cardano.Api.ScriptLanguageInEra.html#HasScriptLanguage"><span class="hs-identifier hs-type">HasScriptLanguage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679222483"><span class="hs-identifier hs-type">lang</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679222481"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PlutusScript</span></span><span> </span><span class="annot"><a href="#local-6989586621679222483"><span class="hs-identifier hs-type">lang</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ScriptDatum</span></span><span> </span><span class="annot"><a href="#local-6989586621679222478"><span class="hs-identifier hs-type">ctx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ScriptRedeemer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><a href="#local-6989586621679222478"><span class="hs-identifier hs-type">ctx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679222481"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-19"></span><span id="mkScriptWitness"><span class="annot"><span class="annottext">mkScriptWitness :: forall ctx era lang.
(IsPlutusScriptLanguage lang, HasScriptLanguage lang era) =&gt;
PlutusScript lang
-&gt; ScriptDatum ctx -&gt; ScriptRedeemer -&gt; ScriptWitness ctx era
</span><a href="Hydra.Cardano.Api.Witness.html#mkScriptWitness"><span class="hs-identifier hs-var hs-var">mkScriptWitness</span></a></span></span><span> </span><span id="local-6989586621679222443"><span class="annot"><span class="annottext">PlutusScript lang
</span><a href="#local-6989586621679222443"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679222442"><span class="annot"><span class="annottext">ScriptDatum ctx
</span><a href="#local-6989586621679222442"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679222441"><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621679222441"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><span class="annottext">forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptRedeemer
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><span class="hs-identifier hs-var">PlutusScriptWitness</span></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lang era.
HasScriptLanguage lang era =&gt;
ScriptLanguageInEra lang era
</span><a href="Hydra.Cardano.Api.ScriptLanguageInEra.html#scriptLanguageInEra"><span class="hs-identifier hs-var">scriptLanguageInEra</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679222483"><span class="hs-identifier hs-type">lang</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679222481"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lang.
IsPlutusScriptLanguage lang =&gt;
PlutusScriptVersion lang
</span><span class="hs-identifier hs-var">plutusScriptVersion</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679222483"><span class="hs-identifier hs-type">lang</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lang. PlutusScript lang -&gt; PlutusScriptOrReferenceInput lang
</span><span class="hs-identifier hs-var">PScript</span></span><span> </span><span class="annot"><span class="annottext">PlutusScript lang
</span><a href="#local-6989586621679222443"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="annottext">ScriptDatum ctx
</span><a href="#local-6989586621679222442"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621679222441"><span class="hs-identifier hs-var">redeemer</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; ExecutionUnits
</span><span class="hs-identifier hs-var">ExecutionUnits</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-comment">-- | Construct a reference script witness, only referring to a 'TxIn' which is</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- expected to contain the given script (only required to satisfy types).</span><span>
</span><span id="line-30"></span><span class="annot"><a href="Hydra.Cardano.Api.Witness.html#mkScriptReference"><span class="hs-identifier hs-type">mkScriptReference</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679222457"><span class="annot"><a href="#local-6989586621679222457"><span class="hs-identifier hs-type">ctx</span></a></span></span><span> </span><span id="local-6989586621679222459"><span class="annot"><a href="#local-6989586621679222459"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679222460"><span class="annot"><a href="#local-6989586621679222460"><span class="hs-identifier hs-type">lang</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsPlutusScriptLanguage</span></span><span> </span><span class="annot"><a href="#local-6989586621679222460"><span class="hs-identifier hs-type">lang</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hydra.Cardano.Api.ScriptLanguageInEra.html#HasScriptLanguage"><span class="hs-identifier hs-type">HasScriptLanguage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679222460"><span class="hs-identifier hs-type">lang</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679222459"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TxIn</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">PlutusScript</span></span><span> </span><span class="annot"><a href="#local-6989586621679222460"><span class="hs-identifier hs-type">lang</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ScriptDatum</span></span><span> </span><span class="annot"><a href="#local-6989586621679222457"><span class="hs-identifier hs-type">ctx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ScriptRedeemer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><a href="#local-6989586621679222457"><span class="hs-identifier hs-type">ctx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679222459"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-40"></span><span id="mkScriptReference"><span class="annot"><span class="annottext">mkScriptReference :: forall ctx era lang.
(IsPlutusScriptLanguage lang, HasScriptLanguage lang era) =&gt;
TxIn
-&gt; PlutusScript lang
-&gt; ScriptDatum ctx
-&gt; ScriptRedeemer
-&gt; ScriptWitness ctx era
</span><a href="Hydra.Cardano.Api.Witness.html#mkScriptReference"><span class="hs-identifier hs-var hs-var">mkScriptReference</span></a></span></span><span> </span><span id="local-6989586621679222428"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679222428"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span id="local-6989586621679222427"><span class="annot"><span class="annottext">PlutusScript lang
</span><a href="#local-6989586621679222427"><span class="hs-identifier hs-var">_script</span></a></span></span><span> </span><span id="local-6989586621679222426"><span class="annot"><span class="annottext">ScriptDatum ctx
</span><a href="#local-6989586621679222426"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679222425"><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621679222425"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><span class="annottext">forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptRedeemer
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><span class="hs-identifier hs-var">PlutusScriptWitness</span></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lang era.
HasScriptLanguage lang era =&gt;
ScriptLanguageInEra lang era
</span><a href="Hydra.Cardano.Api.ScriptLanguageInEra.html#scriptLanguageInEra"><span class="hs-identifier hs-var">scriptLanguageInEra</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679222460"><span class="hs-identifier hs-type">lang</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679222459"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lang.
IsPlutusScriptLanguage lang =&gt;
PlutusScriptVersion lang
</span><span class="hs-identifier hs-var">plutusScriptVersion</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679222460"><span class="hs-identifier hs-type">lang</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall lang.
TxIn -&gt; Maybe ScriptHash -&gt; PlutusScriptOrReferenceInput lang
</span><span class="hs-identifier hs-var">PReferenceScript</span></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679222428"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../file:///nix/store/bsq0l6l46al1xy42xf3gvwwyys8vdbz1-ghc-9.2.7-doc/share/doc/ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><span class="annottext">ScriptDatum ctx
</span><a href="#local-6989586621679222426"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="annottext">ScriptRedeemer
</span><a href="#local-6989586621679222425"><span class="hs-identifier hs-var">redeemer</span></a></span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Natural -&gt; ExecutionUnits
</span><span class="hs-identifier hs-var">ExecutionUnits</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span></pre></body></html>